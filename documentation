# Guide des Modifications - Site Mich-Mich

## ğŸ¯ Nouvelles fonctionnalitÃ©s ajoutÃ©es

### 1. **SystÃ¨me de panier persistant**
- Widget de panier visible sur toutes les pages (sauf page de commande)
- Panier stockÃ© en session cÃ´tÃ© serveur
- PossibilitÃ© d'ajouter/retirer des articles
- Affichage du total en temps rÃ©el

### 2. **Choix du type de samoussa**
- Modal qui s'ouvre lors de l'ajout au panier
- Choix entre **Frais** â„ï¸ ou **SurgelÃ©** ğŸ§Š
- Information visible dans le panier

### 3. **Formulaire de commande complet**
- **Informations client** : nom, email, tÃ©lÃ©phone
- **Lieu de retrait** : choix entre 5 villes (Saint-AndrÃ©, Saint-Denis, etc.)
- **Date de retrait** : avec date minimale au lendemain
- **CrÃ©neaux horaires** : 7 crÃ©neaux disponibles de 9h Ã  18h
- **Mode de paiement** : CB en ligne ou Ã  la livraison

### 4. **Emails automatiques**
- Email de confirmation au client
- Email de notification au commerÃ§ant
- DÃ©tails complets de la commande

## ğŸ“ Fichiers modifiÃ©s/crÃ©Ã©s

### Fichiers Python
- **py.py** : Backend Flask avec gestion du panier et des commandes
  - Routes API pour le panier (`/api/panier/*`)
  - Route de commande (`/submit_commande`)
  - Configuration des emails
  - Gestion des sessions

### Templates HTML
- **michmich.html** : Page d'accueil avec widget panier
- **menu.html** : Page menu avec boutons d'ajout et panier
- **commande.html** : â­ NOUVEAU - Formulaire de commande complet
- **confirmation_commande.html** : â­ NOUVEAU - Page de confirmation
- **contact.html** : InchangÃ© (formulaire de contact simple)

### JavaScript
- **michmich.js** : Logique complÃ¨te du panier
  - Gestion des appels API
  - Modal de choix (frais/surgelÃ©)
  - Affichage dynamique du panier
  - Notifications

## ğŸš€ Installation et configuration

### 1. Variables d'environnement Ã  configurer

```bash
# ClÃ© secrÃ¨te Flask (gÃ©nÃ©rer une clÃ© alÃ©atoire)
export SECRET_KEY="votre_cle_secrete_aleatoire"

# Configuration Email (Gmail)
export MAIL_USERNAME="votre.email@gmail.com"
export MAIL_PASSWORD="votre_mot_de_passe_application"

# (Optionnel) Pour le paiement Stripe
export STRIPE_PUBLIC_KEY="pk_..."
export STRIPE_SECRET_KEY="sk_..."
```

### 2. Configuration Gmail

Pour envoyer des emails via Gmail :

1. Allez sur https://myaccount.google.com/security
2. Activez la validation en 2 Ã©tapes
3. GÃ©nÃ©rez un "Mot de passe d'application"
4. Utilisez ce mot de passe dans `MAIL_PASSWORD`

### 3. DÃ©pendances Python

```bash
pip install -r requirements.txt
```

Les dÃ©pendances incluent :
- Flask 2.3.3
- Flask-Mail 0.9.1
- stripe 5.0.0 (pour futur paiement en ligne)

### 4. Structure des dossiers

```
votre-projet/
â”‚
â”œâ”€â”€ py.py                    # Application Flask
â”œâ”€â”€ requirements.txt
â”‚
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ michmich.html        # Accueil
â”‚   â”œâ”€â”€ menu.html            # Menu/Tarifs
â”‚   â”œâ”€â”€ contact.html         # Contact
â”‚   â”œâ”€â”€ commande.html        # â­ NOUVEAU
â”‚   â”œâ”€â”€ confirmation.html    # Confirmation contact
â”‚   â””â”€â”€ confirmation_commande.html  # â­ NOUVEAU
â”‚
â””â”€â”€ static/
    â”œâ”€â”€ michmich.css
    â”œâ”€â”€ michmich.js
    â””â”€â”€ images/
        â”œâ”€â”€ samousa.jpg
        â”œâ”€â”€ photo.jpg
        â”œâ”€â”€ fb.png
        â”œâ”€â”€ tik.png
        â””â”€â”€ insta.png
```

## ğŸ¨ Personnalisation

### Modifier les villes de retrait

Dans `py.py`, ligne ~30 :

```python
VILLES_RETRAIT = [
    "Saint-AndrÃ©",
    "Saint-Denis",
    "Votre-Ville",
    # Ajoutez vos villes ici
]
```

### Modifier les crÃ©neaux horaires

Dans `py.py`, ligne ~38 :

```python
CRENEAUX_HORAIRES = [
    "9h00 - 10h00",
    "14h00 - 15h00",
    # Ajoutez vos crÃ©neaux ici
]
```

### Ajouter/Modifier des produits

Dans `michmich.html` et `menu.html`, ajoutez des cartes de produits :

```html
<div class="carte">
    <img src="{{ url_for('static', filename='images/votre-image.jpg') }}" alt="Nom">
    <h3>Nom du produit</h3>
    <p>Description</p>
    <span>Prix â‚¬</span><br>
    <button>Ajouter au panier</button>
</div>
```

## ğŸ”§ Fonctionnement technique

### Flux de commande

1. **Utilisateur parcourt le site** â†’ Ajoute des produits au panier
2. **Modal s'ouvre** â†’ Choix frais ou surgelÃ©
3. **Panier mis Ã  jour** â†’ Via API `/api/panier/ajouter`
4. **Clic "Commander"** â†’ Redirection vers `/commande`
5. **Formulaire rempli** â†’ Validation cÃ´tÃ© client
6. **Soumission** â†’ POST vers `/submit_commande`
7. **Emails envoyÃ©s** â†’ Client + commerÃ§ant
8. **Confirmation affichÃ©e** â†’ Panier vidÃ©

### API Endpoints

| Endpoint | MÃ©thode | Description |
|----------|---------|-------------|
| `/api/panier/obtenir` | GET | RÃ©cupÃ¨re le panier |
| `/api/panier/ajouter` | POST | Ajoute un article |
| `/api/panier/retirer` | POST | Retire un article |
| `/api/panier/vider` | POST | Vide le panier |

### Session Flask

Le panier est stockÃ© dans `session['panier']` avec la structure :

```python
[
    {
        'nom': 'Samoussa Poulet',
        'prix': 1.50,
        'quantite': 2,
        'type': 'frais'
    },
    # ...
]
```

## ğŸ¯ Prochaines Ã©tapes possibles

### Paiement en ligne avec Stripe

1. CrÃ©er un compte Stripe
2. Obtenir les clÃ©s API
3. ImplÃ©menter la route `/create-checkout-session`
4. Ajouter le JavaScript Stripe dans `commande.html`

### Gestion avancÃ©e

- Tableau de bord admin pour voir les commandes
- SystÃ¨me de statuts (en prÃ©paration, prÃªte, livrÃ©e)
- Historique des commandes pour les clients
- SystÃ¨me de points de fidÃ©litÃ©

### AmÃ©liorations UX

- Animations plus fluides
- Mode sombre/clair
- Sauvegarde du panier dans localStorage
- PWA (Progressive Web App)

## ğŸ“§ Support

Pour toute question sur les modifications :
- VÃ©rifiez que toutes les variables d'environnement sont configurÃ©es
- Consultez les logs Flask pour les erreurs
- Testez d'abord en environnement de dÃ©veloppement

## âœ… Checklist de dÃ©ploiement

- [ ] Variables d'environnement configurÃ©es
- [ ] Email de test envoyÃ© avec succÃ¨s
- [ ] Toutes les pages testÃ©es
- [ ] Panier fonctionne sur mobile
- [ ] Formulaire de commande validÃ©
- [ ] Images prÃ©sentes dans `/static/images/`
- [ ] SECRET_KEY changÃ©e en production
- [ ] Mode debug dÃ©sactivÃ© (`debug=False`)

Bon courage avec votre site ! ğŸ‰